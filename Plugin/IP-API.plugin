#!name=IP−API_Check
#!desc=支持手动测试。并在后台每分钟检测 IP 变动（切换节点后自动提示）。
#!author=LoonUser
#!homepage=https://github.com/你的GitHub用户名/你的仓库名
#!icon=https://www.google.com/s2/favicons?domain=ip-api.com&sz=128
#!date=2025-12-15

[Rule]
# 强制检测接口走代理，确保测的是节点 IP
DOMAIN-SUFFIX, ip-api.com, Proxy

[Script]
# 1. 手动点击模式 (Loon 卡片/磁贴)
# 强制显示结果
generic script-path=https://raw.githubusercontent.com/Game-2020/Loon/refs/heads/main/Script/IP−API_Check.js, timeout=10, tag=IPAPI手动点击模式, img-url=https://www.google.com/s2/favicons?domain=ip-api.com&sz=128

# 2. 定时自动监控 (每分钟检查一次)
# argument=mode=monitor 表示开启“静默监控模式”，只有 IP 变了才弹窗
cron "0 * * * * *" script-path=https://raw.githubusercontent.com/Game-2020/Loon/refs/heads/main/Script/IP−API_Check.js, timeout=10, tag=IP−API定时自动监控, img-url=https://www.google.com/s2/favicons?domain=ip-api.com&sz=128, argument=mode=monitor

# 3. 网络变动自动检测 (Wi-Fi/数据切换时触发)
network-changed script-path=https://raw.githubusercontent.com/Game-2020/Loon/refs/heads/main/Script/IP−API_Check.js, timeout=10, tag=IP−API网络变动自动检测, img-url=https://www.google.com/s2/favicons?domain=ip-api.com&sz=128, argument=mode=monitor

[MitM]
hostname = ip-api.com
